# 🎨 Hariness UI Design Guide

> **コンセプト**: 「安心感」「優しい・かわいい」「愛着」
> 夜行性のハリネズミと暮らす飼い主のために、目に優しく落ち着いた、毎日開きたくなるデザインを目指します。

---

## 1. カラールール (Color Rules)

ビタミンカラーをベースにしつつ、長時間見ても疲れないよう「彩度を抑えたソフトな色合い」を採用します。

### 🎨 メインカラー

アプリの全体的な印象を決定づける色です。

- **Orange Soft (`#FFB370`)**:
  - 役割: プライマリーアクション、ブランドカラー（日々の記録）
  - 印象: 暖かさ、親しみ、ハリネズミの体色イメージ
  - 使用箇所: メインボタン、アクティブ状態のアイコン、日々の記録のアクセント

- **Medical Teal (`#4DB6AC`)**:
  - 役割: 医療・通院機能のテーマカラー
  - 印象: 清潔感、信頼、冷静さ
  - 使用箇所: 通院記録、診断・治療などの医療系アイコン、通院タブのアクティブ状態

### 🎨 サブカラー

背景や広い面積に使用し、メインカラーを引き立てる色です。

- **Cream Off-White (`#F8F8F0`)**:
  - 役割: 背景色 (Background)
  - 印象: 柔らかさ、紙のような質感、目に優しい
  - 使用箇所: アプリ全体の背景

- **Warm Gray (`#5D5D5D`)**:
  - 役割: テキスト色 (Foreground)
  - 印象: 黒(#000)よりもコントラストが低く、柔らかい読みやすさ
  - 使用箇所: 見出し、本文

### 🎨 アクセントカラー

ポジティブなアクションや、メインとは別の強調に使用します。

- **Soft Pink (`#FF8FA3`)**:
  - 役割: 成功、完了、肯定的な通知、イベント（非医療）
  - 印象: 可愛らしさ、優しさ、通院色との明確な区別（赤系）
  - 使用箇所: 完了チェックマーク、イベントバッジ

### ⚠️ NGな色使い

- **純粋な黒 (`#000000`)**: 硬すぎるため使用禁止。テキストは必ず `#5D5D5D` か、薄いグレーを使用する。
- **蛍光色**: 目に痛く、夜間の利用に不向きなため禁止。
- **彩度の高い赤**: エラー表示でも `#EF5350` (Soft Red) 程度の落ち着いた赤を使用し、威圧感を与えない。

---

## 2. タイポグラフィルール (Typography)

フォントは **"Zen Maru Gothic"** (丸ゴシック) を採用し、角のない優しい印象を与えます。

### フォントファミリー

- **Zen Maru Gothic** (優先)
- sans-serif (フォールバック)

### サイズとウェイト

| 用途                      | サイズ (px/rem) | ウェイト      | 色                    | 備考               |
| ------------------------- | --------------- | ------------- | --------------------- | ------------------ |
| **ページ見出し (H1)**     | 20px (1.25rem)  | Bold (700)    | #5D5D5D               | 画面上部のタイトル |
| **セクション見出し (H2)** | 16px (1rem)     | Bold (700)    | #5D5D5D               | カード内の見出し   |
| **小見出し (H3)**         | 14px (0.875rem) | Bold (700)    | #5D5D5D               |                    |
| **本文 (Body)**           | 14px (0.875rem) | Regular (400) | #5D5D5D               | 標準的なテキスト   |
| **補足・注釈 (Caption)**  | 12px (0.75rem)  | Regular (400) | #5D5D5D (opacity 60%) | 日付、単位、補足   |
| **数値 (大きな表示)**     | 24px-32px       | Bold (700)    | #5D5D5D               | 体重表示など       |

### テキスト表示ルール

- **数値と単位**: `500 g` のように、数値と単位の間には半角スペースを入れる（またはデザイン調整されたGap）。
- **日付**: `2024/01/01` ではなく `1月1日(月)` のような、直感的に曜日がわかる表記を優先する。

---

## 3. レイアウト・余白ルール (Layout & Spacing)

「密度感」を下げ、ゆったりとした余白を持たせることで「安心感」を演出します。

### 余白 (Spacing Tokens)

Tailwindの標準スケールを使用しますが、以下の値を基準とします。

- **xs (4px)**: 密接した要素（アイコンとテキストなど）
- **sm (8px)**: 関連する要素間
- **md (16px)**: **基本の余白**（カード内パディング、要素間の区切り）
- **lg (24px)**: セクション間の余白
- **xl (32px)**: 大きな区切り

### 画面密度 (Density)

- **CompactではなくComfortable**: 情報を詰め込みすぎない。スクロール量が増えても、1つ1つの要素が見やすい高さを確保する。
- **カード化**: 情報をグループごとにカード（白い背景 `bg-white` + 角丸 `rounded-xl`）にまとめ、背景色（Cream）との境界を作る。

---

## 4. コンポーネントルール (Components)

角の丸いデザイン（Rounded）を徹底し、柔らかさを表現します。

### 📦 カードUI (Card)

- **形状**: `rounded-xl` (12px) または `rounded-2xl` (16px)
- **背景**: `bg-white`
- **枠線**: 基本的になし、または非常に薄いボーダー (`border-stone-100`)
- **アクセント**: リスト表示時、カテゴリを表す左ボーダー (`border-l-4`) を付与する。
  - 日々の記録: **Orange** (`#FFB370`)
  - 通院記録: **Teal** (`#4DB6AC`)
- **影**: 浮きすぎないソフトな影 (`shadow-sm`)

### 🔘 ボタン (Buttons)

- **形状**: `rounded-full` (完全な丸み) を推奨。
- **Primary**: `bg-[#FFB370] text-white`
- **Ghost/Icon**: 背景なし、アイコンのみ。ホバー/アクティブ時に薄い背景 (`bg-orange-50` / `bg-stone-100`)。
- **インタラクション**: 全てのボタンは「タップした感」を出すため、以下のスタイルを適用する。
  - **Press**: `active:scale-95` (95%に縮小)
  - **Opacity**: `active:opacity-90` (少し透ける)
  - **Transition**: `transition-transform duration-100`

### 📑 タブ (Tabs)

タブ切り替えもボタン同様に「物理的なスイッチ」のような挙動を持たせます。

- **形状**: `rounded-full`
- **インタラクション**: タップ時に `active:scale-95` アニメーションを必ず適用する。

### 🃏 カードリンク (Card Links)

リストアイテムなど、面積の広いクリッカブル要素に対するインタラクション。

- **Press**: `active:scale-[0.98]` (98%に縮小)
  - 面積が広いため、95%だと動きすぎて視覚的な不快感（酔い）につながるため、控えめにする。
- **Transition**: `transition-transform duration-100`


### ✅ チェックリスト・入力フォーム

- **Checkbox/Radio**: 四角ではなく、ここでも角丸、あるいは丸型を使用する。
- **Input**: 入力エリアの背景は `bg-stone-50` (薄いグレー) を使用し、フォーカス時に `#FFB370` のリングを表示。

### 🖼 アイコン (Icons)

- **Lucide React** のアイコンを基本とする。
- 線幅は細すぎず太すぎない **2px** (デフォルト) を維持。
- 塗りつぶし（Fill）は、アクティブな状態（選択中のタブなど）でのみ使用し、通常は線画（Outline）とする。

#### 補助アイコンライブラリ

Lucide React にない特殊なアイコンは **react-icons (Font Awesome)** を使用する。

| 用途 | アイコン | ライブラリ | 備考 |
|------|----------|------------|------|
| 便（排泄記録） | `FaPoop` | react-icons/fa | Lucide に適切なアイコンがないため |
| 尿（排泄記録） | `FaTint` | react-icons/fa | 水滴アイコン |

#### 状態による色分け

| 状態 | 色 | 用途 |
|------|-----|------|
| **正常** | `stone-400` | 通常の記録表示 |
| **異常** | `#EF5350` (Soft Red) | 健康上の警告を示す |

### ⚠️ 確認ダイアログ (Confirm Dialog)

ユーザーに確認を求める場面では、**統一されたダイアログコンポーネント**を使用する。
ブラウザネイティブの `window.confirm()` は使用禁止。

**形式**: 中央ポップアップ型（AlertDialog）

#### バリアント

| バリアント      | 用途                       | アクセント色         | アイコン        | 例                             |
| --------------- | -------------------------- | -------------------- | --------------- | ------------------------------ |
| **destructive** | 破壊的・取り消し不可の操作 | 赤 (`#EF5350`)       | `AlertTriangle` | 記録削除、アカウント退会       |
| **warning**     | データ消失警告             | オレンジ (`#FFB370`) | `Info`          | フォーム破棄、未保存のまま離脱 |

#### 構成

```
┌───────────────────────────────┐
│        [アイコン (円背景)]      │
│                               │
│           タイトル             │
│        説明文（任意）           │
│                               │
│ [キャンセル]  [確認ボタン]      │
└───────────────────────────────┘
```

#### 実装

共通コンポーネント `ConfirmDialog` を使用:

```tsx
<ConfirmDialog
  open={isConfirmOpen}
  onOpenChange={setIsConfirmOpen}
  variant="warning"
  title="保存されていない変更があります"
  description="変更を破棄して移動しますか？"
  confirmLabel="破棄して移動"
  onConfirm={handleNavigate}
/>
```

---

## 5. UIテーマの使い分け (Theme Variance)

機能の性質に応じて、配色テーマを明確に切り替えます。

### 🔸 日常モード (Daily)

- **テーマカラー**: Orange (`#FFB370`)
- **対象**: 日々の記録、ホーム、カレンダー（通常予定）、体重記録
- **背景**: アイボリー (`#F8F8F0`)
- **ヘッダー**: 背景同色 (アイボリー) で一体感を出す。

### 🔹 医療モード (Medical)

- **テーマカラー**: Teal (`#4DB6AC`)
- **対象**: 通院記録、投薬管理、診察カード
- **背景**: アイボリー (`#F8F8F0`) ※「日常」と同じ
- **ヘッダー**: 「日常」同様に背景同色 (アイボリー) とする。
  - 差別化は**文字色**、**アイコン色**、**ボタン色**で行う。
  - 決してヘッダーの背景色自体を変えて画面を分断させないこと。

---

## 5. トーン & マナー (Tone & Manner)

### 🗣 文言の温度感

- **丁寧だが堅苦しくない**: 「〜してください」よりも「〜しましょう」「〜しますか？」のような、対話的なニュアンス。
- **専門用語を避ける**: 「バイタル」「排泄」などの硬い言葉より、「体重」「うんち・おしっこ」など、日常会話に近い言葉を選ぶ（ただし医療的な正確さが必要な箇所は除く）。

### 🚫 避けるべき表現

- **強い命令形**: 「登録せよ」「禁止」
- **不安を煽る表現**: エラー時も「失敗しました」だけでなく、「もう一度試してみてください」と優しく誘導する。

### 💞 愛着を生む工夫

- **個体名で呼ぶ**: システムメッセージで「ペット」や「個体」ではなく、登録された「お名前」を使用する。（例: 「タワシくんの記録をつけましょう」）
- **完了時の演出**: 記録完了時に、ささやかなアニメーションや褒めるメッセージを表示する。
- **エンプティステート**: データがない時、「データがありません」ではなく、「最初の記録を追加してみましょう！」とイラスト付きで表示する。

---

## 6. ナビゲーション設計ルール (Navigation Design)

アプリ全体でのヘッダー、フッター、戻るボタンの表示ルールを統一します。

### 📱 ページ階層の定義

| レベル               | 説明                                 | 例                                                     |
| -------------------- | ------------------------------------ | ------------------------------------------------------ |
| **L1: メイン画面**   | ボトムナビから直接アクセスする画面   | ホーム、記録履歴、カレンダー、マップ                   |
| **L2: サブ画面**     | メイン画面から遷移する閲覧・一覧画面 | 履歴詳細、設定、リマインダー一覧、通知                 |
| **L3: 入力フォーム** | データ入力に集中する画面             | 日々の記録、通院記録、リマインダー作成、ハリネズミ編集 |

### 🔝 ヘッダー表示ルール

| ページレベル         | メインヘッダー | サブヘッダー（戻る） | 備考                                 |
| -------------------- | -------------- | -------------------- | ------------------------------------ |
| **L1: メイン画面**   | ✅ 表示        | ❌ なし              | タイトル + 通知・設定アイコン        |
| **L2: サブ画面**     | ✅ 表示        | ✅ 戻るボタンのみ    | メインヘッダーの下に「< 戻る」を配置 |
| **L3: 入力フォーム** | ❌ **非表示**  | ✅ 専用ヘッダー      | 「< 戻る」+ タイトル（中央揃え）     |

### 🔻 フッター（ボトムナビ）表示ルール

| ページレベル         | フッター表示  | 理由                           |
| -------------------- | ------------- | ------------------------------ |
| **L1: メイン画面**   | ✅ 表示       | いつでも他セクションへ移動可能 |
| **L2: サブ画面**     | ✅ 表示       | ナビゲーションの一貫性維持     |
| **L3: 入力フォーム** | ❌ **非表示** | フォーカスモード - 入力に集中  |

### ⬅️ 戻るボタンのルール

| ページレベル         | 戻るボタン位置     | スタイル               |
| -------------------- | ------------------ | ---------------------- |
| **L1: メイン画面**   | なし               | -                      |
| **L2: サブ画面**     | メインヘッダーの下 | 「< 戻る」テキスト付き |
| **L3: 入力フォーム** | 専用ヘッダー左端   | 「< 戻る」テキスト付き |

### 📋 具体的なページ分類

#### L1: メイン画面 (ヘッダー✅ + フッター✅)

- `/home` - ホーム
- `/records` - 記録履歴（タブ切替含む）
- `/calendar` - カレンダー
- `/map` - 病院マップ

#### L2: サブ画面 (ヘッダー✅ + フッター✅ + 戻る✅)

- `/records/history` - 日々の記録の全履歴
- `/hospital/history` - 通院記録の全履歴
- `/settings` - 設定トップ
- `/settings/profile` - プロフィール設定
- `/settings/account` - アカウント設定
- `/settings/notifications` - 通知設定
- `/reminders` - リマインダー一覧
- `/notifications` - 通知一覧

#### L3: 入力フォーム (ヘッダー❌ + フッター❌ + 専用ヘッダー✅)

- `/records/[id]/entry` - 日々の記録入力
- `/hospital/entry` - 通院記録入力
- `/reminders/entry` - リマインダー作成・編集
- `/hedgehogs/[id]/edit` - ハリネズミ情報編集
- `/hedgehogs/new` - ハリネズミ新規登録
- `/calendar/events/entry` - イベント作成・編集

### 🎯 入力フォーム専用ヘッダーの設計

```
┌─────────────────────────────────────┐
│ < 戻る       タイトル               │
└─────────────────────────────────────┘
```

- **戻るボタン**: 左端、`< 戻る` テキスト付き
- **タイトル**: 中央揃え、`text-[#5D5D5D]` (グレー)
- **背景**: `bg-[#F8F8F0]` (アイボリー)
- **区切り線**: `border-b border-[#5D5D5D]/10`

> ⚠️ **注意**: タイトルに色付け（オレンジやティール）は使用しない。色の区別はフォーム内のアイコンやボタンで表現する。

### 📐 実装上の注意

1. **フォームページの検出**: URLに `/entry` を含む場合、または `/hedgehogs/new` の場合は L3 として扱う
2. **メインレイアウト**: L3 ページではメインヘッダーを非表示にする
3. **ボトムナビ**: L3 ページでは `return null` でレンダリングしない（現在実装済み）

---

## 7. スプラッシュスクリーン (Splash Screen)

アプリ起動時に表示するブランド演出画面のデザインルールです。

### 🎨 デザイン要素

| 要素         | 仕様                                                            |
| ------------ | --------------------------------------------------------------- |
| 背景色       | Cream Off-White (`#F8F8F0`)                                     |
| ロゴアイコン | 中央配置、96x96px、Orange Soft (`#FFB370`)                      |
| アプリ名     | 「Hariness」、Zen Maru Gothic Bold、28px、Warm Gray (`#5D5D5D`) |
| サブテキスト | 「ハリネズミ健康管理」、14px、Warm Gray 60%                     |
| ローディング | ドットアニメーション、Orange Soft (`#FFB370`)                   |

### 🎬 アニメーション

1. **フェードイン**: ロゴが中央からふわっと出現（0.3s、ease-out）
2. **テキスト出現**: アプリ名がロゴの下にフェードイン（delay 0.2s）
3. **フェードアウト**: 全体がふわっと消える（0.3s）

### ⏱️ 表示時間

- **最小**: 1.5秒（データ読み込み完了後も最低限表示）
- **最大**: 5秒（タイムアウト）

### 📐 レイアウト

```
┌────────────────────────────────────────┐
│                                        │
│                                        │
│              [ロゴアイコン]             │
│                                        │
│              Hariness                  │
│                                        │
│                                        │
│             ●●● (ローディング)          │
│                                        │
└────────────────────────────────────────┘
```

### ✅ 表示条件

- **表示する**: PWA初回起動、ブラウザ初回アクセス
- **表示しない**: アプリ内ページ遷移、同一セッション中のリロード
