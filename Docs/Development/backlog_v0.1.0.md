# 残件一覧（Backlog）- MVP v0.1.0

**作成日**: 2026-01-07  
**ステータス**: 📋 保留（リリース後に対応検討）

---

## 概要

MVPリリースに必要な機能は全て実装・検証完了しています。  
本ドキュメントは、自動化が困難な検証項目や将来対応を検討する項目を整理したものです。

---

## 1. 手動検証継続項目（本番環境で確認推奨）

以下のテストケースは自動化が困難なため、本番環境での受入テスト時に手動確認を推奨します。

| テストID      | 項目                     | 理由                         | 優先度 |
| ------------- | ------------------------ | ---------------------------- | ------ |
| TC-AUTH-01    | 重複登録防止             | Supabase Authの挙動に依存    | P1     |
| TC-AUTH-03    | 退会・物理削除確認       | DB操作の確認が必要           | P1     |
| TC-AUTH-04/05 | RLS（認可）確認          | 複数ユーザーセッションが必要 | P0     |
| TC-HH-02      | 連鎖削除確認             | DB制約の確認が必要           | P0     |
| TC-VR-02〜06  | トランザクション等       | 複雑なDB操作                 | P1     |
| TC-SYS-02     | ネットワーク遮断時の挙動 | ブラウザ操作が複雑           | P1     |
| TC-SYS-03     | リマインダー自動遷移     | 日時操作が必要               | P1     |

### 検証方法メモ

- **TC-AUTH-04/05 (RLS)**: 2つのブラウザで異なるユーザーでログインし、他ユーザーのデータにアクセス不可を確認
- **TC-HH-02 (連鎖削除)**: 個体削除後、Supabase Studioで関連レコードが削除されていることを確認
- **TC-SYS-02 (ネットワーク遮断)**: DevToolsでオフラインにし、保存操作時のエラー表示とデータ保持を確認

---

## 2. 開発残件チェックリスト

| 項目                           | 状態      | 対応時期                                                                       |
| ------------------------------ | --------- | ------------------------------------------------------------------------------ |
| お問い合わせメールアドレス設定 | 🟡 未設定 | **リリース時に必須**（`src/app/(main)/home/page.tsx` の `MAIL_ADDRESS`）       |
| 病院情報提供フォームURL設定    | ✅ 設定済 | **完了**（`src/app/(main)/map/page.tsx` の `SUGGESTION_FORM_URL`）             |
| カバレッジツール導入           | ⏳ 後回し | リリース後                                                                     |
| パフォーマンス測定ツール       | ⏳ 後回し | ユーザー増加時                                                                 |
| アクセスログ解析ツール         | ⏳ 後回し | リリース後                                                                     |
| アラート機能の仕様策定と実装   | ⏳ 後回し | V1.x以降（現在は簡易版のみ実装済）                                             |
| プッシュ通知機能               | ⏳ 後回し | V1.x以降                                                                       |

---

## 3. 将来の機能拡張・改善案リスト（Future Roadmap）

本プロジェクト（MVP）の開発中に出たアイデアや、リリース後（V2以降）に検討すべき機能改善案です。

### 3.1 データベース・機能設計

#### リマインダーの個体紐付け (Optional)
- **現状 (MVP)**: リマインダーはユーザー（飼い主）に紐付くのみ。「Aちゃんの薬」などはタイトルで管理。
- **改善案**: `CARE_REMINDERS` テーブルに `hedgehog_id` カラムを追加し、UIで対象個体を選択可能にする。

#### 単発の記録アクション (API)
- **現状 (MVP)**: `saveDailyBatch` で一括保存のみ。
- **改善案**: ウィジェットやショートカット用に、単発APIエンドポイント (`saveWeightRecord` 等) を復活させる。

#### カレンダーイベントの対象指定
- **現状 (MVP)**: カレンダーイベントは個体紐付けなし。
- **改善案**: イベント作成時に「対象の個体」または「全員」を選択可能にする。

### 3.2 管理者機能 (P1)

#### データ活用・ダッシュボード
- **現状 (MVP)**: 管理機能なし（DB直接操作）。
- **改善案**:
    - **管理者アイコン**: ヘッダーにレンチアイコンを表示（管理者のみ）。
    - **KPIダッシュボード**: 登録数、アクティブ率の可視化。
    - **データエクスポート**: ユーザー属性、バイタル記録、退会ログなどをCSV出力（`10_管理者用機能データエクスポート仕様書.md` 準拠）。

#### お知らせ管理
- **現状 (MVP)**: 機能なし。
- **改善案**: 管理画面からのお知らせ投稿・編集・削除機能。

### 3.3 UI/UX改善

#### カレンダーからの記録操作
- **改善案**: 日付長押し等で、直接「体重」や「食事」を記録できるモーダルを呼び出す。

#### カレンダーの「今後30日の予定」表示
- **現状 (MVP)**: カレンダーのみ表示。
- **改善案**: カレンダー下部や別タブに、直近の予定をリスト形式で表示する。

#### スプラッシュスクリーン
- **改善案**: ブランドロゴ + アプリ名を表示するカスタムスプラッシュスクリーンを作成。

#### OGP画像・ファビコン整備
- **改善案**: SNSシェア用OGP画像、各サイズファビコン、Twitter Card対応。

#### ローディングスケルトンの改善
- **改善案**: コンテンツ形状に合わせたスケルトンUI（カード型、リスト型）の作成。

#### オフライン対応（PWA強化）
- **改善案**: Service Workerによるキャッシュ、オフラインバナー、同期キューの実装。

#### 操作性の改善 (Usability)
- **PWAインストール**: "Add to Homescreen"押下後、アイコン表示まで約3秒のラグがある。改善検討。
- **スワイプ操作**: スマホのスワイプ（スライド）操作でタブ切り替えができるようにしたい。
- **タップ反応**: タップしても反応しない（反応が悪い）ケースの調査と改善。

### 3.3 分析・インサイト機能

#### グラフ機能の強化
- **改善案**: 「食事量と体重の相関」グラフ、同年代平均との比較など。

#### アラート機能の具体化
1. **🚨 緊急アラート**: 温度・湿度異常時の即時通知。
2. **📉 変化・予兆アラート**: 体重減少トレンド、食欲不振（3日連続完食なし）の検知。
3. **💩 健康状態アラート**: 異常便の連続記録時に病院受診を提案。
4. **🗓️ リテンション**: 未記録アラート（安否確認）。

#### 通知設定・プッシュ通知 (P1)
- **現状 (MVP)**: 画面内表示のみ。
- **改善案**:
    - **プッシュ通知実装**: Service Workerを用いたWeb Push通知。
    - **通知設定**: お世話、アラート、お知らせごとのON/OFF詳細設定。

---

## 関連ドキュメント

| ドキュメント                     | 内容               |
| -------------------------------- | ------------------ |
| `automated_test_report.md`       | 自動テスト実施結果 |
| `development_rules_checklist.md` | 開発ルール対応状況 |
| `15_テスト設計書.md`             | テストケース定義   |


---

**最終更新日**: 2026-01-07



ページ遷移系のコメント
・ボトムに４つある
・戻り場所、ブラウザバックと、ページ遷移系に分かれているはず。
    ・ここでただ戻るだけの場合、
・戻ったときに、リロードが必要な場合と、不要な場合がある。
・ブラウザバックは、基本的にリロード不要。これはAPIを呼ばなくてもいいはずなのに、リロードかけてしまっている。
・ダーティフラグってよばれてるものに近い。

・キャッシュとそもそもAPIを呼ばなくてもいい。

・データが書き換わるとき以外は、リロード（API叩くやつ）しない仕様にすると、サクサク動くはず。キャッシュシステムとはちょっと違う。
・今はページ遷移するたびに、毎回APIを叩いてるはず。これをなくすと、改善する。
・編集をしたときのみ叩くというのが、Reactの機能にすでにある？
・メモ化　で一度調べてみる。Reactの仕組み。デフォルトでONになっているはず。最新だと入ってないかも。メモ化という文脈で改善点をAIに探してもらうといいかも。

・記録系とかカレンダとか、どこまで読み込むかあとは
・呼ばなくていいときは呼ばない。と重くならない。
・設定の戻る、ブラウザバックがいいかも。
・マップはデフォルト値をもっておくべき。関東関西が多いなら、東京中心をデフォルトでいい。
・位置情報取得の実装するといいはず。
・病院を探すとき、のユースケースを考えるといいかも。通院メモへの導線を設けたり、近くの病院を探せるといいかも。

・セキュリティで心配しておくべき点。
・・決済にかかわるところ、改ざん、個人情報
・・ID、パスワードを忘れたときの再設定方法

・ご本人様確認をどう、抑えておくか。トラブル時想定して抑えておくべき、それを踏まえてそろえておくべきデータを考えるべき。

・