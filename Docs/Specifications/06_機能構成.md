**プロジェクト名**: Hariness（ハリネス）  
**作成日**: 2025年12月18日  
**更新日**: 2025年12月18日  
**作成者**: 城田 航

---

> 対象：モバイルファースト／PWA。
>
> 記号：🟢=P0（必須）／🟡=P1（優先度中・後追いでも可）／🔴=OUT（今回スコープ外）

## 0. 優先度の定義と判断基準

本プロジェクトにおける優先度（P0/P1）は、**「2025/1/21のリリース時に、飼い主が『使いたい』と思えるコア体験を最低限の品質で提供できるか」**を軸に決定しています。

### 🟢 P0 (Must Have / MVP必須)

**「これがないとアプリの存在意義がなくなり、使ってもらえない」機能。**

1.  **コア体験の実現**: 日々の記録（体重・食事・排泄）と、その振り返り（グラフ・カレンダー）に直結する機能。
2.  **差別化要因**: 「多頭飼い対応」など、既存の汎用メモツールに対する明確な優位性となる機能。
3.  **信頼性**: ユーザーが安心してデータを預けられるための最低限の認証・データ保護機能。

### 🟡 P1 (Nice to Have / V1.x以降)

**「あると便利だが、なくても記録・管理というコア体験は損なわない」機能。**

1.  **運用の高度化**: プッシュ通知やリッチな管理画面など、利便性を高めるが実装工数が高い機能。
2.  **代替手段が存在**: お知らせ配信（SNSで代替可）や、高度な分析（リリース直後はデータが少ないため不要）など。
3.  **データ蓄積後の価値**: アラート検知の高度化など、一定量のデータが溜まってから真価を発揮する機能。

### 🔴 OUT (Out of Scope / 今回対象外)

**「今回のプロジェクト目標（MVP）の達成には不要、またはコスト対効果が見合わない」機能。**

1.  **MVPの定義外**: アルバム機能など、SNS的な要素は今回の「健康管理」という主目的から外れるため。
2.  **技術的制約・コスト**: ストア配信やオフライン対応など、開発コストや維持コストが個人開発の範疇を超えるもの。

---

## 1. 認証・ユーザー管理

- 🟢 サインアップ（メール/パスワード登録）
- 🟢 サインイン/サインアウト（ログインしたままにする機能含む）
- 🟢 パスワードリセット（メールリンク送信）
- 🟢 メール検証（Verify 処理）
- 🟢 初回登録フロー（飼い主プロフィール登録→個体登録→完了）
- 🟢 プロフィール編集（飼い主の表示名・アイコン・性別・年齢・住所）
- 🟢 退会（アカウント削除、退会理由選択）
- 🟡 権限ロール（管理者/一般）
  - _理由: リリース初期は管理者が開発者のみのため、DB直接操作で対応可能。_

## 2. 共通/システム

- 🟢 PWA 対応
- 🟢 セキュリティ（認証/RLS/HTTPS）
- 🟡 運用（ログ/バックアップ 30 日/自動）
  - _理由: Supabaseの標準機能でカバーし、専用画面の実装は後回しとする。_
- 🔴 オフライン対応（スコープ外）
  - _理由: 同期処理の実装工数が肥大化するため。まずはオンライン前提でリリースし、ユーザーニーズを見極める。_

## 3. 飼い主向け機能

### 3.1 個体管理（機能 1）

- 🟢 個体登録・編集・削除（名前・写真・性別・生年月日・迎えた日・見た目の特徴、最大 10 頭まで）
- 🟢 個体一覧（個体選択、個体情報表示：写真・名前・性別・年齢・生年月日・迎えた日・見た目の特徴）
- 🟢 初回登録時の個体登録（複数個体の一括登録対応）
- 🟢 個体メニュー（ホーム画面の「︙」からアクセス）
- 🟢 ペット保険番号登録
- 🟢 写真アイコン設定
- 🔴 アルバム機能
  - _理由: 健康管理というコア機能に集中するため。画像ストレージ容量の圧迫リスクも考慮。_

### 3.2 健康記録（機能 2）

- 🟢 体重記録（数値入力・日付・自動グラフ化）
- 🟢 食事記録（テキスト入力・30 文字まで・履歴表示、時刻記録、複数登録対応、削除・追加機能、複製機能、数値＋単位選択）
- 🟢 排泄状態記録（正常/異常チェック（異常時は詳細入力）、時刻記録、複数登録対応、削除・追加機能）
- 🟢 気温記録
- 🟢 湿度記録
- 🟢 投薬状況記録（時刻・薬名）
- 🟢 メモ記録（自由記述）
- 🟢 記録履歴トップ画面（個体切り替え、日付ナビゲーション、タブ切り替え（記録/グラフ）、通院履歴への導線）
- 🟢 今日の記録確認画面（日付別の記録一覧表示）
- 🟢 記録履歴グラフ表示（体重推移グラフ（**折れ線グラフ**、**30日/90日/180日/全期間**選択））

### 3.3 通院・治療記録（機能 3）

- 🟢 診療記録登録（日付・診断名・治療内容・処方されたお薬・次回診察日）
- 🟢 次回診察日のカレンダー自動表示（通院記録と連動）
- 🟢 通院記録フォーム（診療内容・処方されたお薬・次回診察日入力）
- 🟢 通院記録確認画面（入力内容の確認）
- 🔴 ファイル添付（写真/PDF）（スコープ外）
  - _理由: Supabase Storageの容量制限と実装工数の削減のため。文字情報での記録を優先。_

### 3.4 お世話リマインダー（機能 4）

- 🟢 登録（タイトル・日付・時刻・繰り返し設定）
- 🟢 一覧（時刻順自動ソート、完了チェック機能、完了済み項目のグレーアウト表示）
- 🟢 編集・削除（編集画面内から削除可能）
- 🟢 繰り返し設定（ON/OFF、毎日の繰り返し、曜日指定の繰り返し）
- 🟢 自動リセット（完了状態は翌日0時にリセット、1回のみ設定は翌日自動OFF）
- 🟢 通知（画面内アラート表示）
- 🟡 プッシュ通知（指定時刻にリマインダー内容を通知）
  - _理由: 実装難易度が高く工数を要するため。MVPでは「アプリを開いた時に気づける」画面内表示で代替。_

### 3.5 アラート機能（機能 5）

- 🟢 健康データ分析（体重増減異常・食事回数低下・排泄状態異常・温度・湿度異常）
- 🟢 ホーム画面アラート表示（検知ルールは簡易的なものに限定）
- 🟡 プッシュ通知（異常検知時にアラート内容を通知）
  - _理由: リマインダー同様、実装工数削減のため。まずはホーム画面での気づきを優先。_

### 3.6 カレンダー機能（機能 7）

- 🟢 カレンダー表示（月表示、誕生日/通院履歴マーカー）
- 🟢 日付クリックでイベント表示（ボトムシート表示、通院・登録イベント、詳細・編集ボタン）
- 🟢 イベント追加/編集（日付選択、イベント名入力、保存）
- 🟢 誕生日表示（登録個体ごと）
- 🟢 通院日表示（通院記録と連動）
- 🟢 次回診察日表示（通院記録の「次回診察日」と連動）

### 3.7 病院マップ機能（機能 8）

- 🟢 協会提供マップを埋め込み表示（Google マイマップ利用、個体切り替えUI対応）
- 🟢 病院情報提供フォーム（マップ画面からGoogleフォームへ遷移）

### 3.8 通知機能（機能 9）

- 🟡 通知一覧・詳細表示（ホーム画面ヘッダーの🔔アイコンからアクセス、お知らせとアラート履歴を統合表示）
  - _理由: リリース直後は履歴として残すべき通知が少なく、ホーム画面のアラート表示で十分機能するため。_
- 🟡 お知らせの投稿・編集（管理者のみ、管理画面から実施）
  - _理由: 管理画面開発の工数削減。初期はDB直接投入等で運用カバー可能。_
- 🟡 新着通知のプッシュ通知（管理者がお知らせを公開したタイミング、またはアラート検知時に通知）
  - _理由: InstagramやX（Twitter）などのSNSで代替可能なため。_

### 3.9 外部リンク・情報提供機能（機能 10）

- 🟢 協会HPリンク（ホーム画面下部から遷移）
- 🟢 協会Instagramリンク（ホーム画面下部から遷移）
- 🟢 お問い合わせ先（ホーム画面下部で連絡先情報表示）

### 3.10 設定機能（機能 11）

- 🟢 設定メニュー画面（ホーム画面ヘッダーの⚙アイコンから遷移）
- 🟢 飼い主プロフィール編集（表示名・アイコン・性別・年齢・住所）
- 🟢 飼い主プロフィール確認画面（編集内容の確認）
- 🟢 利用規約・プライバシーポリシー確認
- 🟢 ログアウト（確認モーダル表示）
- 🟡 通知設定（プッシュ通知全体の有効/無効、およびON時の個別設定：お世話リマインダー、アラート、管理者からのお知らせ）
  - _理由: プッシュ通知機能自体がP1のため、それに付随する設定もP1とする。_

## 4. 協会・管理者向け機能

### 4.1 協会・管理者データ活用（管理画面）（機能 6）

- 🟡 管理者アイコン（ホーム画面ヘッダーに🔧表示、管理者ログイン時のみ）
- 🟡 管理ダッシュボード（KPI閲覧：総登録数、登録個体数、アクティブユーザー数）
- 🟡 データエクスポート（期間指定、CSV出力：ユーザー属性/個体属性/バイタル記録/通院記録/リマインダー設定）
  - _理由（全体）: ユーザー機能の開発を最優先するため。データ蓄積には時間がかかるため、分析機能はリリース後（データが溜まってから）の実装でも事業価値を損なわない。_

### 4.2 お知らせ管理（機能 9 関連・通知機能の一部）

- 🟡 お知らせ投稿・編集・削除（管理者のみ）
- 🟡 公開/非公開設定（下書き機能）
  - _理由: 3.8と同様。運用でカバー可能。_

## 5. 配布・運用

- 🟢 PWA リンク配布
- 🟡 QR コード案内
- 🔴 ストア配信（App Store / Google Play は対象外）
  - _理由: ストアの審査コスト・金銭的コストがかかり、無料・個人開発での提供が困難なため。Web標準のPWAで十分な体験を提供できると判断。_
