## 1. アプリを使い始めたい（初回登録・認証）

### 1.1 新規登録をして使い始めたい（初回登録フロー）

```mermaid
flowchart TD
    A[アプリを起動] --> B[ログイン画面 A01]
    B --> C[新規登録を選択]
    C --> D[新規登録 A02]
    D --> E[ユーザー名/メール/パスワード入力]
    E --> F{規約を見る？}
    F -->|はい| G[利用規約 A03]
    G --> D
    F -->|いいえ| H[規約同意チェック]
    H --> I[登録ボタンをクリック]
    I --> J[メール検証送信]
    J --> K[メール検証完了 A04]
    K --> L[飼い主プロフィール登録 A09]
    L --> M[ユーザー名/性別/年齢/住所を入力]
    M --> N[次に進む]
    N --> O[個体編集/新規登録 初回 A10]
    O --> P[個体情報を入力]
    P --> Q{続けて追加する？}
    Q -->|はい| O
    Q -->|いいえ| R[初回登録完了 A11]
    R --> S[ホーム画面へ]
```

### 1.2 ログインして使い始めたい（ログインフロー）

```mermaid
flowchart TD
    A[アプリを起動] --> B[スプラッシュ/初期化 A00]
    B --> C{セッション判定}
    C -->|ログイン済み| D[ホーム画面へ]
    C -->|未ログイン| E[ログイン画面 A01]
    E --> F[メール/パスワード入力]
    F --> G{ログインしたままにする？}
    G -->|はい| H[セッション保存]
    G -->|いいえ| I[セッション保存しない]
    H --> J[サインインボタン]
    I --> J
    J --> K{認証結果}
    K -->|成功| L{ロール判定}
    K -->|失敗| M[エラー表示]
    M --> F
    L -->|一般ユーザー| N[ホーム画面へ]
    L -->|管理者| O[ホーム画面へ<br>（ヘッダーに管理者アイコン🔧表示）]
```

### 1.3 パスワードを忘れたので再設定したい

```mermaid
flowchart TD
    A[パスワードをリセットしたい] --> B[ログイン画面 A01]
    B --> C[パスワードを忘れたをクリック]
    C --> D[パスワードリセット 送信 A05]
    D --> E[メールアドレスを入力]
    E --> F[送信ボタンをクリック]
    F --> G[パスワードリセットメール送信完了 A06]
    G --> H[メール内のリンクをクリック]
    H --> I[パスワードリセット 更新 A07]
    I --> J[新しいパスワードを入力 2回]
    J --> K[保存ボタンをクリック]
    K --> L[パスワードリセット 完了 A08]
    L --> M[ログイン画面へ戻る]
```

---

## 2. 日々の記録をつけたい（ホーム・記録）

### 2.1 お世話のリマインダーを設定・確認・完了したい

```mermaid
flowchart TD
    A[リマインダーを管理したい] --> B[ホーム画面 H10]
    B --> C[リマインダーを閲覧する]
    C --> D[リマインダー一覧 H11]
    D --> E{操作を選択}
    E -->|追加| F[リマインダー登録 H12]
    E -->|編集| G[リマインダー編集 H12]
    E -->|完了チェック| L[完了状態にする（翌日リセット）]
    F --> H[時刻/タイトル/繰り返し設定（毎日or曜日）を入力]
    G --> I[既存設定を編集]
    H --> J[リマインダーを保存]
    I --> J
    I --> M[削除ボタン]
    M --> N[削除確認]
    N --> O[削除実行]
    J --> K[リマインダー一覧へ戻る]
    O --> K
```

### 2.2 今日の健康記録（食事・排泄・体重など）をつけたい

```mermaid
flowchart TD
    A[健康記録を登録したい] --> B[ホーム画面 H10]
    B --> C[今日の記録ボタン H10-2]
    C --> D[今日の記録 記録フォーム R12]
    D --> E[記録項目を選択]
    E --> F[食事/排泄/体重/気温・湿度/投薬/メモ]
    F --> G[記録を入力]
    G --> H[記録を保存]
    H --> I[今日の記録確認画面 R11]
    I --> J[記録内容を確認]
    J --> K[OK]
    K --> L[記録履歴トップへ戻る]
```

### 2.3 過去の記録やグラフを確認したい

```mermaid
flowchart TD
    A[記録履歴を確認したい] --> B[ホーム画面 H10]
    B --> C[フッタータブ：記録履歴]
    C --> D[記録履歴トップ R10]
    D --> E[個体を選択]
    E --> F[日付ナビゲーションで日付を変更]
    F --> G[記録表示エリアで記録を確認]
    G --> H{記録タブ or グラフタブ？}
    H -->|記録タブ| I[日付別の記録一覧]
    H -->|グラフタブ| J[記録履歴 グラフ表示 R13]
    I --> K[今日の記録確認画面 R11]
    K --> L[記録詳細を確認]
    L -->|修正したい| M[今日の記録（記録フォーム） R12]
    L -->|確認終了| N[記録履歴トップへ戻る]
    M --> O[内容を編集]
    O --> P[保存]
    P --> N
    M --> Q[削除]
    Q --> N
    J --> R[体重推移グラフ/気温・湿度グラフ]
    R --> S[期間を選択 30日/90日/180日/範囲指定]
    S --> T[グラフを確認]
    T --> N
```

---

## 3. 予定を管理・記録したい（カレンダー・通院）

### 3.1 カレンダーで予定を確認したい

```mermaid
flowchart TD
    A[カレンダーで予定を確認したい] --> B[カレンダートップ C10]
    B --> C{操作を選択}
    C -->|イベント追加| E[イベント追加/編集 C11]
    E --> F[日付/タイトルを入力]
    F --> G[保存]
    G --> M[カレンダートップへ戻る]
    C -->|カレンダー日付タップ| H[イベント詳細（ボトムシート）]
    H --> I{操作}
    I -->|編集| E
    I -->|削除| J[削除実行]
    J --> M
```

### 3.2 通院記録（病院の記録）をつけたい

```mermaid
flowchart TD
    A[通院記録を登録したい] --> B[ホーム画面 H10]
    B --> C[通院記録ボタン H10-3]
    C --> D[通院記録 記録フォーム V10]
    D --> E[日付を選択]
    E --> F[診療内容を入力]
    F --> G[処方されたお薬を入力]
    G --> H[次回診察日を選択]
    H --> I[通院記録を保存]
    I --> J[通院記録 確認画面 V11]
    J --> K[入力内容を確認]
    K --> L[OK]
    L --> M[ホーム画面へ戻る]
```

### 3.3 病院を探したい（マップ）

```mermaid
flowchart TD
    A[病院を探したい] --> B[マップトップ M10]
    B --> C{操作を選択}
    C -->|地図を見る| D[地図上のピン（病院）を確認]
    D --> E[Googleマップ（外部）へ遷移]
    C -->|病院を提案| F[病院を提案する]
    F --> G[情報提供フォーム（外部）]
    G --> H[Googleフォーム（外部）へ遷移]
```

---

## 4. ハリネズミの情報を管理したい（個体登録）

### 4.1 新しくハリネズミを登録したい・情報を修正したい

```mermaid
flowchart TD
    A[個体を追加・編集したい] --> B[ホーム画面 H10]
    B --> C[個体メニュー H10-1]
    C --> D{操作を選択}
    D -->|編集| E[個体編集 P10]
    D -->|新規追加| F[新規個体登録 P10]
    E --> G[情報を入力・保存]
    F --> G
    G --> H[ホームへ戻る]
```

### 4.2 表示する個体を切り替えたい

```mermaid
flowchart TD
    A[表示する個体を切り替えたい] --> B[各画面のヘッダー（ホーム/記録/カレンダー）]
    B --> C[個体名ドロップダウンをタップ]
    C --> D[リストから個体を選択]
    D --> E[選択した個体のデータに表示切り替え]
```

---

## 5. アプリの設定・情報を確認したい（その他）

### 5.1 通知（お知らせ・アラート）を確認したい

```mermaid
flowchart TD
    A[通知を確認したい] --> B[ホーム画面 H10]
    B --> C[通知アイコン（🔔）]
    C --> D[通知一覧 I10]
    D --> E[通知一覧（お知らせ/アラート）を確認]
    E --> F{詳細を見る？}
    F -->|はい| G[通知詳細を展開]
    G --> D
    F -->|いいえ| H[ホーム画面へ戻る]
```

### 5.2 飼い主プロフィールを確認・変更したい

```mermaid
flowchart TD
    A[飼い主プロフィール変更] --> B[ホーム画面 H10]
    B --> C[設定アイコン（⚙）]
    C --> D[設定メニュー S00]
    D --> E[飼い主プロフィール登録 S10]
    E --> F[情報を編集]
    F --> G[登録ボタン]
    G --> H[飼い主プロフィール登録確認 S10-1]
    H --> I[OK]
    I --> J[設定メニューへ戻る]
```

### 5.3 通知設定（プッシュ通知など）を変更したい

```mermaid
flowchart TD
    A[通知設定変更] --> B[ホーム画面 H10]
    B --> C[設定アイコン（⚙）]
    C --> D[設定メニュー S00]
    D --> E[通知設定 S11]
    E --> F[通知設定を変更]
    F --> F1{プッシュ通知全体}
    F1 -->|ONにする| F2[詳細設定を表示]
    F1 -->|OFFにする| G[すべての通知をOFFにして保存]
    F2 --> F3[お世話リマインダー通知 ON/OFF]
    F2 --> F4[通知（お知らせ、アラート）ON/OFF]
    F3 --> H[設定を保存]
    F4 --> H
    H --> I[設定メニューへ戻る]
    G --> I
```

### 5.4 利用規約を確認したい

```mermaid
flowchart TD
    A[利用規約確認] --> B[ホーム画面 H10]
    B --> C[設定アイコン（⚙）]
    C --> D[設定メニュー S00]
    D --> E[利用規約 S12]
    E --> F[規約を確認]
    F --> G[設定メニューへ戻る]
```

### 5.5 アプリを退会したい

```mermaid
flowchart TD
    A[退会] --> B[ホーム画面 H10]
    B --> C[設定アイコン（⚙）]
    C --> D[設定メニュー S00]
    D --> E[退会 S13]
    E --> F[退会理由を選択]
    F --> G[退会する]
    G --> H[退会完了 S14]
    H --> I[ログイン画面へ]
```

### 5.6 協会公式サイト・SNS・お問い合わせ

```mermaid
flowchart TD
    A[外部連携・お問い合わせ] --> B[ホーム画面 H10]
    B --> C{連携先を選択}
    C -->|Instagram| D[協会公式インスタグラム（外部）]
    D --> E[外部アプリ/ブラウザへ遷移]
    C -->|Webサイト| F[協会公式サイト（外部）]
    F --> G[外部ブラウザへ遷移]
    C -->|お問い合わせ| H[メールアプリ起動]
    H --> I[お問い合わせメール作成画面へ]
```

### 5.7 ログアウトしたい

```mermaid
flowchart TD
    A[ログアウト] --> B[ホーム画面 H10]
    B --> C[設定アイコン（⚙）]
    C --> D[設定メニュー S00]
    D --> E[ログアウト]
    E --> F[ログアウト確認モーダル S15]
    F --> G{ログアウトしますか？}
    G -->|はい| H[ログアウト実行]
    H --> I[ログイン画面へ戻る]
    G -->|いいえ| D
```

---

## 6. 協会・管理者向け機能

### 6.1 登録状況（KPI）を確認したい

```mermaid
flowchart TD
    A[登録状況を確認したい] --> B[ホーム画面 H10（管理者）]
    B --> C[管理者アイコン（🔧）]
    C --> D[管理ダッシュボード ADM00]
    D --> E[総ユーザー数・登録個体数などを確認]
    E --> F[管理者モード終了]
```

### 6.2 データを分析したい（CSVエクスポート）

```mermaid
flowchart TD
    A[データを分析したい] --> B[ホーム画面 H10（管理者）]
    B --> C[管理者アイコン（🔧）]
    C --> D[管理ダッシュボード ADM00]
    D --> E[データエクスポート ADM10]
    E --> F[対象期間を指定]
    F --> G[出力データを選択（チェック）]
    G --> H[CSV出力ボタン]
    H --> I[CSVファイル取得]
    I --> J[外部ツールで分析]
```

### 6.3 お知らせを配信したい（お知らせ管理）

```mermaid
flowchart TD
    A[お知らせを配信したい] --> B[ホーム画面 H10（管理者）]
    B --> C[管理者アイコン（🔧）]
    C --> D[管理ダッシュボード ADM00]
    D --> E[お知らせ管理 ADM20]
    E --> F{操作を選択}
    F -->|新規作成| G[新規お知らせモーダル]
    F -->|編集| H[お知らせの編集モーダル]
    F -->|削除| I[削除確認]
    G --> J[タイトル・本文入力]
    J --> K[公開するトグル ON/OFF]
    K --> L[公開する/保存する]
    L --> M[お知らせ管理へ戻る]
    H --> N[内容修正]
    N --> O[公開するトグル ON/OFF]
    O --> P[更新する]
    P --> M
    I --> Q[削除実行]
    Q --> M
```
